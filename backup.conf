# =================================================================
#         Configuration for rsync Backup Script v0.29
# =================================================================
# !! IMPORTANT !! Set file permissions to 600 (chmod 600 backup.conf)

# --- Source and Destination ---
# List all source directories to back up, separated by spaces.
#
# IMPORTANT: Follow these two rules for each path:
# 1. End the path with a trailing slash (e.g., "user/").
# 2. Use "/./" to mark the part of the path you want to create on the destination.
#    Example: "/home/./user/" will create a "user" directory in your BOX_DIR.
BACKUP_DIRS="/./home/user/ /./var/log/ /./etc/nginx/"

# The root folder on the remote server where backups will be placed.
# IMPORTANT: This path MUST end with a trailing slash (e.g., /backups/).
BOX_DIR="/home/myvps/"

# --- Connection Details ---
# The SSH address of your remote backup server (e.g., user@host).
BOX_ADDR="u444300-sub4@u444300.your-storagebox.de"

# Add each SSH option on a new line.
# For options taking a value, see the rules below.
BEGIN_SSH_OPTS
# Options with simple values (like a port) can be combined.
-p23

# Options that take a file path (like an identity key) MUST be on separate lines.
-i
/root/.ssh/id_ed25519
END_SSH_OPTS

# --- Performance ---
# Optional: Limit rsync's bandwidth usage in KiB/s. Leave empty or set to 0 to disable.
# Example: BANDWIDTH_LIMIT_KBPS=5000  (for 5 MB/s)
BANDWIDTH_LIMIT_KBPS=""

# --- Integrity Check ---
# Set to true to enable slow but thorough checksum-based integrity checks.
# Default is false for fast checks (based on file size and modification time).
CHECKSUM_ENABLED=false

# --- Logging ---
LOG_FILE="/var/log/backup_rsync.log"
# Max log size in Megabytes (MB) before the script rotates it.
MAX_LOG_SIZE_MB=10
# Delete rotated logs older than this many days.
LOG_RETENTION_DAYS=90

# --- Recycle Bin ---
# If enabled, files deleted from the source will be moved to a remote
# recycle bin instead of being permanently removed. This provides a safety net.
RECYCLE_BIN_ENABLED=true
# The name of the directory on the remote server to use as the recycle bin.
RECYCLE_BIN_DIR="recycle_bin"
# The number of days to keep daily backup folders in the recycle bin before deleting them.
RECYCLE_BIN_RETENTION_DAYS=30

# --- Notification Toggles ---
# Set to 'true' to enable, 'false' to disable.
NTFY_ENABLED=true
DISCORD_ENABLED=false

# --- ntfy Credentials ---
NTFY_TOKEN="tk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
NTFY_URL="https://ntfy.sh/your-private-topic-name"

# --- ntfy Notification Priorities ---
# 5=max/urgent, 4=high, 3=default, 2=low, 1=min
NTFY_PRIORITY_SUCCESS=3
NTFY_PRIORITY_WARNING=4
NTFY_PRIORITY_FAILURE=4

# --- Discord Credentials ---
DISCORD_WEBHOOK_URL="https://discord.com/api/webhooks/your/webhook_url_here"

# --- rsync Exclusions ---
# List all file/directory patterns to exclude below.
# The script will read everything between the BEGIN and END markers.
BEGIN_EXCLUDES
# Common cache and temporary files
.cache/
/tmp/
*.tmp
*.bak
*.swp

# Specific application caches/dependencies
/node_modules/
/vendor/
__pycache__/

# System files that shouldn't be backed up
/lost+found/
.DS_Store
Thumbs.db

# Some common files which can be skipped
.bash_history
.bash_logout
.bashrc
.config/
.docker/
.local/
.profile
.ssh/
.sudo_as_admin_successful
.wget-hsts
END_EXCLUDES
